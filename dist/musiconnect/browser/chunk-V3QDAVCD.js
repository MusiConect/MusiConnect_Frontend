import{a as X,b as W,d as B,g as j,r as z}from"./chunk-TKQ7GRMY.js";import{a as V}from"./chunk-FQDNF3NE.js";import{a as U}from"./chunk-Q4PFRBFB.js";import{Aa as w,Ba as v,F as l,Fa as G,I as g,K as O,O as P,Oa as k,R as u,T as L,U as r,V as o,W as h,Z as F,aa as s,ba as y,ca as D,da as T,ea as p,ga as S,ha as x,ia as $,ja as E,ka as c,la as m,u as b,v as A}from"./chunk-H2FOQYQS.js";function K(d,n){if(d&1){let t=F();r(0,"div",31)(1,"input",32),T("change",function(){let a=b(t).$implicit,i=p();return A(i.toggleGenero(a))}),o(),r(2,"span",23),S(3),o()()}if(d&2){let t=n.$implicit,e=p();l(),u("checked",e.generosSeleccionados.has(t)),l(2),x(t.replace("_"," "))}}function H(d,n){if(d&1&&(r(0,"span"),S(1),o()),d&2){let t=p();L(t.tipoMensaje==="success"?"text-sm text-green-600 font-medium px-3 py-1 bg-green-100 rounded-md":"text-sm text-red-600 font-medium px-3 py-1 bg-red-100 rounded-md"),l(),$(" ",t.mensajeAccion," ")}}var q=class d{constructor(n,t,e){this.userSrv=n;this.sessionSrv=t;this.router=e}nombreArtistico="";email="";bio="";instrumentos="";ubicacion="";disponibilidad=!1;generosSeleccionados=new Set;generosValidos=["ROCK","POP","JAZZ","CLASSICAL","HIP_HOP","REGGAETON","BLUES","ELECTRONIC","FOLK","LATIN","COUNTRY","METAL","RNB","SOUL","PUNK","DISCO","FUNK","SALSA","CUMBIA","BACHATA","K_POP","OPERA","SOUNDTRACK","SAYA","CAPORAL","INDIE","OTHER"];userId=null;mensajeAccion="";tipoMensaje="success";ngOnInit(){if(this.userId=this.sessionSrv.getUserId(),this.userId===null){this.router.navigate(["/login"]);return}this.userSrv.getById(this.userId).subscribe({next:n=>this.cargarUsuario(n),error:()=>this.router.navigate(["/login"])})}cargarUsuario(n){this.nombreArtistico=n.nombreArtistico,this.email=n.email,this.bio=n.bio??"",this.instrumentos=n.instrumentos??"",this.ubicacion=n.ubicacion??"",this.disponibilidad=n.disponibilidad??!1,n.generosMusicales&&n.generosMusicales.forEach(t=>{typeof t=="string"?this.generosSeleccionados.add(t):t.nombre&&this.generosSeleccionados.add(t.nombre)})}toggleGenero(n){this.generosSeleccionados.has(n)?this.generosSeleccionados.delete(n):this.generosSeleccionados.add(n)}guardarCambios(){if(this.userId===null)return;let n={email:this.email,bio:this.bio,ubicacion:this.ubicacion,instrumentos:this.instrumentos,disponibilidad:this.disponibilidad,generos:Array.from(this.generosSeleccionados)};this.userSrv.updateUser(this.userId,n).subscribe({next:()=>{this.tipoMensaje="success",this.mensajeAccion="Perfil actualizado correctamente \u2705",setTimeout(()=>this.mensajeAccion="",3e3)},error:t=>{this.tipoMensaje="error",this.mensajeAccion=t.error?.message??"Error al actualizar perfil \u274C",setTimeout(()=>this.mensajeAccion="",3e3)}})}static \u0275fac=function(t){return new(t||d)(g(V),g(U),g(k))};static \u0275cmp=O({type:d,selectors:[["app-editar-perfil"]],decls:38,vars:9,consts:()=>{let n;n=$localize`Editar perfil`;let t;t=$localize`Foto de perfil:`;let e;e=$localize`Nombre artístico:`;let a;a=$localize`Correo electrónico:`;let i;i=$localize`Ubicación (País):`;let I;I=$localize`ESTADO: ${"\uFFFD0\uFFFD"}:INTERPOLATION:`;let C;C=$localize`Disponible`;let M;M=$localize`Tu biografía:`;let R;R=$localize`Instrumentos que utilizas:`;let f;f=$localize`Géneros que te gustan:`;let N;return N=$localize`Guardar cambios`,[n,t,e,a,i,I,C,M,R,f,N,[1,"max-w-6xl","mx-auto","px-8"],[1,"text-4xl","font-bree","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-10"],[1,"font-bree","block","mb-2"],["src","/FotoPerfil.png","alt","Foto de perfil",1,"w-64","h-64","object-cover","border-2","border-black","rounded-[15px]","mb-6"],[1,"font-bree","block","mb-1"],["type","text","disabled","",1,"w-full","max-w-xl","border-2","border-black","rounded-[15px]","px-4","py-2","mb-4","bg-gray-200",3,"ngModelChange","ngModel"],["type","email",1,"w-full","max-w-xl","border-2","border-black","rounded-[15px]","px-4","py-2","mb-4",3,"ngModelChange","ngModel"],["type","text",1,"w-full","max-w-xl","border-2","border-black","rounded-[15px]","px-4","py-2","mb-4",3,"ngModelChange","ngModel"],[1,"font-bree","mb-2"],[1,"inline-flex","items-center"],["type","checkbox",1,"mr-2",3,"ngModelChange","ngModel"],[1,"font-bree"],["rows","3","placeholder","Escribe tu biograf\xEDa...",1,"w-full","max-w-xl","border-2","border-black","rounded-[15px]","p-2","mb-4",3,"ngModelChange","ngModel"],["type","text","placeholder","Separe los instrumentos con comas...",1,"w-full","max-w-xl","border-2","border-black","rounded-[15px]","px-4","py-2","mb-4",3,"ngModelChange","ngModel"],[1,"border-2","border-black","rounded-[15px]","h-48","overflow-y-auto","p-2","max-w-xl"],["class","flex items-center mb-1",4,"ngFor","ngForOf"],[1,"mt-10","flex","flex-col","items-center","gap-2"],[1,"bg-[#FF48FF]","text-white","font-bree","px-10","py-3","rounded-[15px]",3,"click"],[3,"class",4,"ngIf"],[1,"flex","items-center","mb-1"],["type","checkbox",1,"mr-2",3,"change","checked"]]},template:function(t,e){t&1&&(r(0,"div",11)(1,"h1",12),s(2,0),o(),r(3,"div",13)(4,"div")(5,"label",14),s(6,1),o(),h(7,"img",15),r(8,"label",16),s(9,2),o(),r(10,"input",17),m("ngModelChange",function(i){return c(e.nombreArtistico,i)||(e.nombreArtistico=i),i}),o(),r(11,"label",16),s(12,3),o(),r(13,"input",18),m("ngModelChange",function(i){return c(e.email,i)||(e.email=i),i}),o(),r(14,"label",16),s(15,4),o(),r(16,"input",19),m("ngModelChange",function(i){return c(e.ubicacion,i)||(e.ubicacion=i),i}),o(),r(17,"p",20),s(18,5),o(),r(19,"label",21)(20,"input",22),m("ngModelChange",function(i){return c(e.disponibilidad,i)||(e.disponibilidad=i),i}),o(),r(21,"span",23),s(22,6),o()()(),r(23,"div")(24,"label",16),s(25,7),o(),r(26,"textarea",24),m("ngModelChange",function(i){return c(e.bio,i)||(e.bio=i),i}),o(),r(27,"label",16),s(28,8),o(),r(29,"input",25),m("ngModelChange",function(i){return c(e.instrumentos,i)||(e.instrumentos=i),i}),o(),r(30,"label",16),s(31,9),o(),r(32,"div",26),P(33,K,4,2,"div",27),o()()(),r(34,"div",28)(35,"button",29),T("click",function(){return e.guardarCambios()}),s(36,10),o(),P(37,H,2,3,"span",30),o()()),t&2&&(l(10),E("ngModel",e.nombreArtistico),l(3),E("ngModel",e.email),l(3),E("ngModel",e.ubicacion),l(2),y(e.disponibilidad?"DISPONIBLE":"NO DISPONIBLE"),D(18),l(2),E("ngModel",e.disponibilidad),l(6),E("ngModel",e.bio),l(3),E("ngModel",e.instrumentos),l(4),u("ngForOf",e.generosValidos),l(4),u("ngIf",e.mensajeAccion))},dependencies:[G,w,v,z,W,X,B,j],styles:['.font-bree[_ngcontent-%COMP%]{font-family:"Bree Serif",serif}.border-2.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.border-2.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:10px}.border-2.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}']})};export{q as EditarPerfilComponent};
