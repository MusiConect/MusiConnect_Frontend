import{o as l}from"./chunk-H2FOQYQS.js";var a=class r{TOKEN_KEY="token";USER_ID_KEY="userId";NOMBRE_KEY="nombreArtistico";ROLE_KEY="role";setSession(t){localStorage.setItem(this.TOKEN_KEY,t.token),localStorage.setItem(this.USER_ID_KEY,t.userId.toString()),localStorage.setItem(this.NOMBRE_KEY,t.nombreArtistico);let e=this.extractRole(t.token);e&&localStorage.setItem(this.ROLE_KEY,e)}clearSession(){localStorage.removeItem(this.TOKEN_KEY),localStorage.removeItem(this.USER_ID_KEY),localStorage.removeItem(this.NOMBRE_KEY)}getUserId(){let t=localStorage.getItem(this.USER_ID_KEY);return t?+t:null}getNombreArtistico(){return localStorage.getItem(this.NOMBRE_KEY)}isLoggedIn(){return!!localStorage.getItem(this.TOKEN_KEY)}getRole(){let t=localStorage.getItem(this.ROLE_KEY);if(t==="MUSICO"||t==="PRODUCTOR")return t;let e=localStorage.getItem(this.TOKEN_KEY);return e?this.extractRole(e):null}extractRole(t){let e=t.split(".")[1];if(!e)return null;try{let o=JSON.parse(atob(e.replace(/-/g,"+").replace(/_/g,"/")));if(o.role==="MUSICO"||o.role==="PRODUCTOR")return o.role;if(o.roleId===2)return"MUSICO";if(o.roleId===3)return"PRODUCTOR"}catch{return null}return null}static \u0275fac=function(e){return new(e||r)};static \u0275prov=l({token:r,factory:r.\u0275fac,providedIn:"root"})};export{a};
