import{a as F}from"./chunk-CEGOQ7NR.js";import{a as k}from"./chunk-Q4PFRBFB.js";import{Aa as I,Ba as w,Da as y,F as l,Fa as E,I as c,K as x,Ma as M,O as m,Oa as R,R as p,U as r,V as i,Z as C,da as b,ea as u,ga as a,ha as g,ia as d,pa as h,qa as S,u as v,v as f,za as _}from"./chunk-H2FOQYQS.js";function D(n,o){if(n&1){let e=C();r(0,"button",13),b("click",function(){v(e);let s=u();return f(s.goEdit())}),r(1,"i18n"),a(2,"Editar"),i()()}}function T(n,o){if(n&1&&(r(0,"span",14),a(1),h(2,"titlecase"),i()),n&2){let e=u();p("ngClass",e.estadoClass(e.collaboration==null?null:e.collaboration.estado)),l(),d(" ",S(2,2,e.collaboration==null?null:e.collaboration.estado)," ")}}function B(n,o){if(n&1&&(r(0,"li",15),a(1),i()),n&2){let e=o.$implicit;l(),d(" ",e," ")}}var A=class n{constructor(o,e,t,s){this.route=o;this.router=e;this.collaborationSvc=t;this.sessionSvc=s}collaboration=null;collaborators=[];showEdit=!1;ngOnInit(){let o=this.route.snapshot.paramMap.get("id"),e=o?+o:null;e&&this.loadCollaboration(e)}loadCollaboration(o){this.collaborationSvc.getById(o).subscribe(e=>{this.collaboration=e;let t=this.sessionSvc.getUserId(),s=this.sessionSvc.getNombreArtistico();this.showEdit=t!==null&&e.usuarioId===t||!!s&&e.nombreUsuario===s,Array.isArray(e.colaboradores)?this.collaborators=[...e.colaboradores].sort((N,O)=>N.localeCompare(O,"es")):this.loadCollaborators(o)})}loadCollaborators(o){this.collaborationSvc.listarColaboradores(o).subscribe(e=>{this.collaborators=e.map(t=>typeof t=="string"?t:t?.nombreArtistico??"").filter(Boolean).sort((t,s)=>t.localeCompare(s,"es"))})}estadoClass(o){switch((o??"").toLowerCase()){case"pendiente":return"bg-[#FF8DFF]";case"en progreso":case"en_progreso":case"enprogreso":return"bg-[#8D278D]";case"finalizado":return"bg-[#000784]";default:return"bg-gray-400"}}goEdit(){this.collaboration&&this.router.navigate(["/editar-colaboracion",this.collaboration.colaboracionId])}goBack(){this.router.navigate(["/listar-colaboraciones"])}static \u0275fac=function(e){return new(e||n)(c(M),c(R),c(F),c(k))};static \u0275cmp=x({type:n,selectors:[["app-mostrar-colaboracion"]],decls:25,vars:6,consts:[[1,"relative","p-6","font-bree"],["src","/Retroceder.png","alt","Retroceder","aria-label","Volver a la lista de colaboraciones",1,"w-12","h-12","cursor-pointer","absolute","right-6","top-6",3,"click"],[1,"flex","flex-col","sm:flex-row","sm:items-center","gap-4","flex-wrap"],[1,"text-[64px]","leading-none","break-words","mr-4"],["type","button","class","w-[150px] h-[49px] rounded-[15px] bg-[#000784] text-white text-[24px] hover:opacity-90",3,"click",4,"ngIf"],[1,"flex","items-center","flex-wrap","gap-3","mt-2"],[1,"text-[24px]"],["class","px-3 py-1 text-white text-[16px] rounded-md",3,"ngClass",4,"ngIf"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-8","mt-8"],[1,"lg:col-span-2"],[1,"text-[32px]","mb-4"],[1,"text-[28px]","whitespace-pre-line"],["class","text-[28px] mb-2",4,"ngFor","ngForOf"],["type","button",1,"w-[150px]","h-[49px]","rounded-[15px]","bg-[#000784]","text-white","text-[24px]","hover:opacity-90",3,"click"],[1,"px-3","py-1","text-white","text-[16px]","rounded-md",3,"ngClass"],[1,"text-[28px]","mb-2"]],template:function(e,t){e&1&&(r(0,"div",0)(1,"img",1),b("click",function(){return t.goBack()}),i(),r(2,"div",2)(3,"h1",3),a(4),i(),m(5,D,3,0,"button",4),i(),r(6,"div",5)(7,"p",6)(8,"i18n"),a(9,"Creado por:"),i(),a(10),i(),m(11,T,3,4,"span",7),i(),r(12,"div",8)(13,"div",9)(14,"h2",10)(15,"i18n"),a(16,"Descripcion:"),i()(),r(17,"p",11),a(18),i()(),r(19,"div")(20,"h2",10)(21,"i18n"),a(22,"Colaboradores:"),i()(),r(23,"ul"),m(24,B,2,1,"li",12),i()()()()),e&2&&(l(4),g(t.collaboration==null?null:t.collaboration.titulo),l(),p("ngIf",t.showEdit),l(5),d(" ",t.collaboration==null?null:t.collaboration.nombreUsuario,""),l(),p("ngIf",t.collaboration==null?null:t.collaboration.estado),l(7),g(t.collaboration==null?null:t.collaboration.descripcion),l(6),p("ngForOf",t.collaborators))},dependencies:[E,_,I,w,y],encapsulation:2})};export{A as MostrarColaboracionComponent};
