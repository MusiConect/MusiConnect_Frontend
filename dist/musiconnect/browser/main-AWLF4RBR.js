import{a as re}from"./chunk-CEGOQ7NR.js";import{a as K}from"./chunk-2B52NTL2.js";import{a as st}from"./chunk-PAUB4K2N.js";import{a as Ce}from"./chunk-XITNKEX4.js";import{b as P,c as A,d as F,e as Y,f as he,g as J,h as Z,i as ve,j as xe,k as Se,l as Ee,m as Me,n as at,o as lt,q as ye,r as Q,s as we}from"./chunk-TKQ7GRMY.js";import{a as N}from"./chunk-Q4PFRBFB.js";import{$ as fe,Aa as G,Ba as E,C as qe,Ca as _e,E as Xe,Ea as Ze,F as s,Fa as M,Ga as Qe,I as b,Ia as be,Ja as et,K as S,Ka as tt,La as it,Ma as nt,Na as ot,O as _,Oa as x,Pa as H,R as m,Ra as rt,Sa as R,T as Ke,Ta as Te,U as r,V as n,W as g,X as V,Y as j,Z as h,_ as ue,aa as y,c as Be,da as c,ea as p,fa as te,ga as l,h as Ue,ha as I,i as ze,ia as O,ja as w,k as We,ka as T,la as k,o as ne,oa as le,pa as se,qa as ge,r as oe,ra as Ye,s as q,sa as Je,u,v as f,w as B,x as U,za as X}from"./chunk-H2FOQYQS.js";var bt=t=>({"bg-gray-100":t});function Ct(t,i){t&1&&(r(0,"div",9),l(1,"Sin notificaciones"),n())}function ht(t,i){if(t&1){let e=h();r(0,"li",10),c("mouseenter",function(){let a=u(e).$implicit,d=p(3);return f(d.markAsRead(a.id))}),g(1,"div",11),r(2,"div",12),l(3),se(4,"date"),n(),r(5,"button",13),c("click",function(a){let d=u(e).$implicit,C=p(3);return f(C.remove(d.id,a))}),l(6," \xD7 "),n()()}if(t&2){let e=i.$implicit;m("ngClass",le(6,bt,!e.leida)),s(),m("innerHTML",e.mensaje,qe),s(2),I(Ye(4,3,e.fecha,"short"))}}function vt(t,i){if(t&1&&(V(0),_(1,Ct,2,0,"div",6),r(2,"div",7)(3,"ul"),_(4,ht,7,8,"li",8),n()(),j()),t&2){let e=i.ngIf,o=p(2);s(),m("ngIf",!e.length),s(3),m("ngForOf",e)("ngForTrackBy",o.trackById)}}function xt(t,i){if(t&1){let e=h();r(0,"div",1)(1,"div",2)(2,"span",3),l(3,"Notificaciones"),n(),r(4,"button",4),c("click",function(){u(e);let a=p();return f(a.clearAll())}),l(5," Borrar todas "),n()(),_(6,vt,5,3,"ng-container",5),se(7,"async"),n()}if(t&2){let e=p();s(6),m("ngIf",ge(7,1,e.notifs$))}}var ke=class t{constructor(i){this.notifications=i;this.notifs$=this.notifications.list$}open=!1;notifs$;markAsRead(i){this.notifications.markAsRead(i)}remove(i,e){e&&(e.stopPropagation(),e.preventDefault()),this.notifications.remove(i)}clearAll(){this.notifications.clearAll()}trackById(i,e){return e.id}static \u0275fac=function(e){return new(e||t)(b(K))};static \u0275cmp=S({type:t,selectors:[["app-notification-dropdown"]],inputs:{open:"open"},decls:1,vars:1,consts:[["class","absolute right-0 mt-2 w-80 bg-white text-black border border-gray-300 rounded shadow-xl z-50 font-sans","role","listbox","aria-label","Historial de notificaciones",4,"ngIf"],["role","listbox","aria-label","Historial de notificaciones",1,"absolute","right-0","mt-2","w-80","bg-white","text-black","border","border-gray-300","rounded","shadow-xl","z-50","font-sans"],[1,"flex","justify-between","items-center","px-4","py-2","border-b","border-gray-200"],[1,"font-semibold"],["type","button","aria-label","Borrar todas",1,"text-xs","text-red-600","hover:underline",3,"click"],[4,"ngIf"],["class","p-4 text-center text-gray-500",4,"ngIf"],[1,"max-h-60","overflow-y-auto"],["class","relative px-4 py-2 border-b border-gray-100 hover:bg-gray-50 cursor-pointer",3,"ngClass","mouseenter",4,"ngFor","ngForOf","ngForTrackBy"],[1,"p-4","text-center","text-gray-500"],[1,"relative","px-4","py-2","border-b","border-gray-100","hover:bg-gray-50","cursor-pointer",3,"mouseenter","ngClass"],[1,"text-sm",3,"innerHTML"],[1,"text-xs","text-gray-400","mt-1"],["type","button","aria-label","Eliminar",1,"absolute","right-2","top-1","w-5","h-5","flex","items-center","justify-center","text-gray-400","hover:text-gray-600",3,"click"]],template:function(e,o){e&1&&_(0,xt,8,3,"div",0),e&2&&m("ngIf",o.open)},dependencies:[M,X,G,E,_e,Ze],encapsulation:2})};function St(t,i){if(t&1){let e=h();r(0,"ul",26)(1,"li")(2,"a",27),c("click",function(){u(e);let a=p();return f(a.closeDropdowns())}),l(3,"Perfiles"),n()(),r(4,"li")(5,"a",28),c("click",function(){u(e);let a=p();return f(a.closeDropdowns())}),l(6,"Bandas"),n()()()}}function Et(t,i){if(t&1){let e=h();r(0,"ul",26)(1,"li")(2,"a",29),c("click",function(){u(e);let a=p();return f(a.closeDropdowns())}),l(3,"Perfiles"),n()(),r(4,"li")(5,"a",30),c("click",function(){u(e);let a=p();return f(a.closeDropdowns())}),l(6,"Bandas"),n()()()}}function Mt(t,i){if(t&1){let e=h();r(0,"li")(1,"a",33),c("click",function(){u(e);let a=p(2);return f(a.closeMenu())}),l(2,"Colaboraci\xF3n"),n()()}}function yt(t,i){if(t&1){let e=h();r(0,"li")(1,"a",34),c("click",function(){u(e);let a=p(2);return f(a.closeMenu())}),l(2,"Convocatoria"),n()()}}function wt(t,i){if(t&1){let e=h();r(0,"li")(1,"a",35),c("click",function(){u(e);let a=p(2);return f(a.closeMenu())}),l(2,"Banda"),n()()}}function Tt(t,i){if(t&1){let e=h();r(0,"ul",26),_(1,Mt,3,0,"li",31)(2,yt,3,0,"li",31),r(3,"li")(4,"a",32),c("click",function(){u(e);let a=p();return f(a.closeMenu())}),l(5,"Publicaci\xF3n"),n()(),_(6,wt,3,0,"li",31),n()}t&2&&(s(),m("appHasRole","MUSICO"),s(),m("appHasRole","PRODUCTOR"),s(4),m("appHasRole","PRODUCTOR"))}function kt(t,i){if(t&1&&(r(0,"span",36),l(1),n()),t&2){let e=i.ngIf;m("hidden",e===0),s(),I(e)}}function It(t,i){if(t&1&&(r(0,"div",37),l(1),n()),t&2){let e=p();s(),O(" ",e.toastMessage," ")}}function Nt(t,i){if(t&1){let e=h();r(0,"ul",48)(1,"li",49)(2,"a",50),c("click",function(){u(e);let a=p(2);return f(a.closeMenu())}),l(3,"Perfiles"),n()(),r(4,"li",49)(5,"a",51),c("click",function(){u(e);let a=p(2);return f(a.closeMenu())}),l(6,"Bandas"),n()()()}}function Ot(t,i){if(t&1){let e=h();r(0,"ul",48)(1,"li",49)(2,"a",52),c("click",function(){u(e);let a=p(2);return f(a.closeMenu())}),l(3,"Perfiles"),n()(),r(4,"li",53)(5,"a",54),c("click",function(){u(e);let a=p(2);return f(a.closeMenu())}),l(6,"Bandas"),n()()()}}function Rt(t,i){if(t&1){let e=h();r(0,"li")(1,"a",56),c("click",function(){u(e);let a=p(3);return f(a.closeMenu())}),l(2,"Colaboraci\xF3n"),n()()}}function Pt(t,i){if(t&1){let e=h();r(0,"li")(1,"a",57),c("click",function(){u(e);let a=p(3);return f(a.closeMenu())}),l(2,"Convocatoria"),n()()}}function At(t,i){if(t&1){let e=h();r(0,"li")(1,"a",58),c("click",function(){u(e);let a=p(3);return f(a.closeMenu())}),l(2,"Banda"),n()()}}function Ft(t,i){if(t&1){let e=h();r(0,"ul",48),_(1,Rt,3,0,"li",31)(2,Pt,3,0,"li",31),r(3,"li")(4,"a",55),c("click",function(){u(e);let a=p(2);return f(a.closeMenu())}),l(5,"Publicaci\xF3n"),n()(),_(6,At,3,0,"li",31),n()}t&2&&(s(),m("appHasRole","MUSICO"),s(),m("appHasRole","PRODUCTOR"),s(4),m("appHasRole","PRODUCTOR"))}function Lt(t,i){if(t&1){let e=h();r(0,"div",38)(1,"div")(2,"button",39),c("click",function(){u(e);let a=p();return f(a.toggleDropdown("explorar"))}),l(3," Explorar "),r(4,"span"),l(5,"\u25BC"),n()(),_(6,Nt,7,0,"ul",40),n(),r(7,"a",41),c("click",function(){u(e);let a=p();return f(a.closeMenu())}),l(8,"Inicio"),n(),r(9,"a",42),c("click",function(){u(e);let a=p();return f(a.closeMenu())}),l(10,"Colaboraciones"),n(),r(11,"a",43),c("click",function(){u(e);let a=p();return f(a.closeMenu())}),l(12,"Convocatorias"),n(),r(13,"div")(14,"button",39),c("click",function(){u(e);let a=p();return f(a.toggleDropdown("seguimientos"))}),l(15," Seguimientos "),r(16,"span"),l(17,"\u25BC"),n()(),_(18,Ot,7,0,"ul",40),n(),r(19,"a",44),c("click",function(){u(e);let a=p();return f(a.closeMenu())}),l(20,"Artistas"),n(),r(21,"div")(22,"button",39),c("click",function(){u(e);let a=p();return f(a.toggleDropdown("crear"))}),l(23," Crear "),r(24,"span"),l(25,"\u25BC"),n()(),_(26,Ft,7,3,"ul",40),n(),g(27,"hr",45),r(28,"a",46),c("click",function(a){u(e);let d=p();return f(d.goToMyProfile(a))}),l(29,"Mi Perfil"),n(),r(30,"button",47),c("click",function(){u(e);let a=p();return f(a.logout())}),l(31,"Salir"),n()()}if(t&2){let e=p();s(6),m("ngIf",e.showExplorar),s(12),m("ngIf",e.showSeguimientos),s(8),m("ngIf",e.showCrear)}}var Ie=class t{constructor(i,e,o){this.router=i;this.session=e;this.notifications=o;this.unreadCount$=this.notifications.list$.pipe(ze(a=>a.filter(d=>!d.leida).length)),this.subs.add(this.notifications.toast$.subscribe(a=>this.toastMessage=a))}showExplorar=!1;showCrear=!1;showSeguimientos=!1;toggleDropdown(i){i==="explorar"?(this.showExplorar=!this.showExplorar,this.showCrear=!1,this.showSeguimientos=!1):i==="crear"?(this.showCrear=!this.showCrear,this.showExplorar=!1,this.showSeguimientos=!1):(this.showSeguimientos=!this.showSeguimientos,this.showExplorar=!1,this.showCrear=!1)}closeDropdowns(){this.showExplorar=!1,this.showCrear=!1,this.showSeguimientos=!1}handleClickOutside(i){let e=i.target;!e.closest("nav")&&!e.closest("header")&&(this.closeDropdowns(),this.showNotificaciones=!1)}menuAbierto=!1;showNotificaciones=!1;unreadCount$;toastMessage=null;subs=new Be;toggleMenu(){this.menuAbierto=!this.menuAbierto}closeMenu(){this.menuAbierto=!1,this.closeDropdowns()}logout(){localStorage.removeItem("token"),this.notifications.clearAll(),this.closeMenu(),this.router.navigate(["/home"])}goToMyProfile(i){i&&i.preventDefault();let e=this.session.getUserId();e!==null&&this.router.navigate(["/ver-perfil",e]),this.closeMenu()}toggleNotifications(){this.showNotificaciones=!this.showNotificaciones}ngOnDestroy(){this.subs.unsubscribe()}static \u0275fac=function(e){return new(e||t)(b(x),b(N),b(K))};static \u0275cmp=S({type:t,selectors:[["app-header"]],hostBindings:function(e,o){e&1&&c("click",function(d){return o.handleClickOutside(d)},!1,Xe)},decls:43,vars:9,consts:[[1,"bg-pinkfigma","text-black","px-6","py-4","shadow-md","sticky","top-0","z-50","font-bree"],[1,"flex","justify-between","items-center"],["routerLink","/home","aria-label","P\xE1gina principal",1,"flex","items-center","gap-2"],["src","/Logo.png","alt","logo MusiConnect",1,"w-10","h-10"],[1,"text-xl","font-poppins","font-bold"],[1,"lg:hidden",3,"click"],["fill","none","stroke","currentColor","stroke-width","2","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","d","M4 6h16M4 12h16M4 18h16"],[1,"hidden","lg:flex","gap-6","text-lg","items-center"],[1,"relative"],[1,"flex","items-center","gap-1","hover:underline",3,"click"],["class","absolute z-10 bg-white text-black rounded shadow-md mt-2 w-40",4,"ngIf"],["routerLink","/listar-convocatorias",1,"hover:underline"],["routerLink","/publicaciones",1,"hover:underline",3,"click"],["routerLink","/listar-colaboraciones",1,"hover:underline",3,"click"],[1,"hidden","lg:flex","items-center","gap-4"],["href","#",1,"hover:underline","hidden","md:inline",3,"click"],["type","button","aria-label","Notificaciones",1,"relative",3,"click"],["src","/Notificaciones.png","alt","Notificaciones"],["class","absolute -top-1 -right-1 bg-red-600 text-white text-xs rounded-full px-1",3,"hidden",4,"ngIf"],[3,"open"],["class","absolute right-0 mt-2 w-72 bg-red-50 border border-red-300 rounded shadow-lg p-3 text-sm text-red-800 z-50",4,"ngIf"],[1,"w-10","h-10","bg-gray-200","rounded-md","overflow-hidden"],["src","/FotoPerfil.png","alt","Avatar",1,"object-cover","w-full","h-full"],[1,"hover:underline","hidden","md:inline",3,"click"],["class","lg:hidden mt-4 flex flex-col gap-2 text-lg font-bree",4,"ngIf"],[1,"absolute","z-10","bg-white","text-black","rounded","shadow-md","mt-2","w-40"],["routerLink","/listar-perfiles",1,"block","px-4","py-2","hover:bg-gray-200",3,"click"],["routerLink","/bandas",1,"block","px-4","py-2","hover:bg-gray-200",3,"click"],["routerLink","/listar-seguidos",1,"block","px-4","py-2","hover:bg-gray-200",3,"click"],["routerLink","/bandas-seguidas",1,"block","px-4","py-2","hover:bg-gray-200",3,"click"],[4,"appHasRole"],["routerLink","/crear-publicacion",1,"block","px-4","py-2","hover:bg-gray-200",3,"click"],["routerLink","/crear-colaboracion",1,"block","px-4","py-2","hover:bg-gray-200",3,"click"],["routerLink","/crear-convocatoria",1,"block","px-4","py-2","hover:bg-gray-200",3,"click"],["routerLink","/crear-banda",1,"block","px-4","py-2","hover:bg-gray-200",3,"click"],[1,"absolute","-top-1","-right-1","bg-red-600","text-white","text-xs","rounded-full","px-1",3,"hidden"],[1,"absolute","right-0","mt-2","w-72","bg-red-50","border","border-red-300","rounded","shadow-lg","p-3","text-sm","text-red-800","z-50"],[1,"lg:hidden","mt-4","flex","flex-col","gap-2","text-lg","font-bree"],[1,"w-full","text-left","px-2","py-2","hover:bg-pink-100","rounded","flex","justify-between","items-center",3,"click"],["class","ml-4 mt-1 space-y-1",4,"ngIf"],["routerLink","/home",1,"block","py-2",3,"click"],["routerLink","/listar-colaboraciones",1,"block","py-2",3,"click"],["routerLink","/listar-convocatorias",1,"block","py-2",3,"click"],["href","#",1,"block","py-2",3,"click"],[1,"my-2"],["href","#",1,"px-2","py-2","hover:bg-pink-100","rounded",3,"click"],[1,"px-2","py-2","hover:bg-pink-100","rounded","text-left","w-full",3,"click"],[1,"ml-4","mt-1","space-y-1"],[1,"hover:underline"],["routerLink","/listar-perfiles",3,"click"],["routerLink","/bandas",3,"click"],["routerLink","/listar-seguidos",3,"click"],[1,"hover:underline","cursor-pointer"],["routerLink","/bandas-seguidas",3,"click"],["routerLink","/crear-publicacion",1,"block","px-4","py-2","hover:bg-gray-700","rounded",3,"click"],["routerLink","/crear-colaboracion",1,"block","px-4","py-2","hover:bg-gray-700","rounded",3,"click"],["routerLink","/crear-convocatoria",1,"block","px-4","py-2","hover:bg-gray-700","rounded",3,"click"],["routerLink","/crear-banda",1,"block","px-4","py-2","hover:bg-gray-700","rounded",3,"click"]],template:function(e,o){e&1&&(r(0,"header",0)(1,"div",1)(2,"a",2),g(3,"img",3),r(4,"span",4),l(5,"MusiConnect"),n()(),r(6,"button",5),c("click",function(){return o.toggleMenu()}),B(),r(7,"svg",6),g(8,"path",7),n()(),U(),r(9,"nav",8)(10,"div",9)(11,"button",10),c("click",function(){return o.toggleDropdown("explorar")}),l(12," Explorar \u25BC "),n(),_(13,St,7,0,"ul",11),n(),r(14,"a",12),l(15,"Convocatorias"),n(),r(16,"a",13),c("click",function(){return o.closeMenu()}),l(17,"Publicaciones"),n(),r(18,"a",14),c("click",function(){return o.closeMenu()}),l(19,"Colaboraciones"),n(),r(20,"div",9)(21,"button",10),c("click",function(){return o.toggleDropdown("seguimientos")}),l(22," Seguimientos \u25BC "),n(),_(23,Et,7,0,"ul",11),n(),r(24,"div",9)(25,"button",10),c("click",function(){return o.toggleDropdown("crear")}),l(26," Crear \u25BC "),n(),_(27,Tt,7,3,"ul",11),n()(),r(28,"div",15)(29,"a",16),c("click",function(d){return o.goToMyProfile(d)}),l(30,"Mi Perfil"),n(),r(31,"div",9)(32,"button",17),c("click",function(){return o.toggleNotifications()}),g(33,"img",18),_(34,kt,2,2,"span",19),se(35,"async"),n(),g(36,"app-notification-dropdown",20),_(37,It,2,1,"div",21),n(),r(38,"div",22),g(39,"img",23),n(),r(40,"button",24),c("click",function(){return o.logout()}),l(41,"Salir"),n()()(),_(42,Lt,32,3,"div",25),n()),e&2&&(s(13),m("ngIf",o.showExplorar),s(10),m("ngIf",o.showSeguimientos),s(4),m("ngIf",o.showCrear),s(7),m("ngIf",ge(35,7,o.unreadCount$)),s(2),m("open",o.showNotificaciones),s(),m("ngIf",o.toastMessage),s(5),m("ngIf",o.menuAbierto))},dependencies:[M,E,_e,R,H,ke,Ce],encapsulation:2})};var Ne=class t{constructor(i){this.http=i}chatUrl=`${Te.apiUrl}/ai-chat/chat`;sendMessage(i){return this.http.post(this.chatUrl,i,{responseType:"text"})}static \u0275fac=function(e){return new(e||t)(oe(be))};static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})};function jt(t,i){if(t&1){let e=h();r(0,"button",2),c("click",function(){u(e);let a=p();return f(a.toggleChat())}),g(1,"img",3),n()}}function Gt(t,i){if(t&1&&(r(0,"div",23)(1,"div",24),l(2),n(),g(3,"img",25),n()),t&2){let e=p().$implicit;s(2),O(" ",e.text," ")}}function Ht(t,i){if(t&1&&(r(0,"div",26)(1,"div",27),l(2),n(),g(3,"img",28),n()),t&2){let e=p().$implicit;s(2),O(" ",e.text," ")}}function $t(t,i){if(t&1&&(V(0),_(1,Gt,4,1,"div",21)(2,Ht,4,1,"div",22),j()),t&2){let e=i.$implicit;s(),m("ngIf",e.from==="bot"),s(),m("ngIf",e.from==="user")}}function Bt(t,i){t&1&&g(0,"img",29)}function Ut(t,i){if(t&1){let e=h();r(0,"div",4)(1,"div",5),g(2,"img",6),r(3,"div",7)(4,"h2",8),l(5,"MusiChat"),n(),r(6,"div",9),g(7,"span",10),r(8,"span",11),l(9,"Online"),n()()(),r(10,"button",12),c("click",function(){u(e);let a=p();return f(a.toggleChat())}),g(11,"img",13),n()(),r(12,"div",14),_(13,$t,3,2,"ng-container",15)(14,Bt,1,0,"img",16),n(),r(15,"div",17)(16,"input",18),k("ngModelChange",function(a){u(e);let d=p();return T(d.messageText,a)||(d.messageText=a),f(a)}),c("keyup.enter",function(){u(e);let a=p();return f(a.sendMessage())}),n(),r(17,"button",19),c("click",function(){u(e);let a=p();return f(a.sendMessage())}),g(18,"img",20),n()()()}if(t&2){let e=p();s(13),m("ngForOf",e.messages),s(),m("ngIf",e.isLoading),s(2),w("ngModel",e.messageText)}}var Oe=class t{constructor(i){this.chatService=i}chatOpen=!1;messageText="";messages=[{text:"Hola! soy MusiChat, el bot oficial de MusiConnect, en que puedo ayudarte el d\xEDa de hoy?",from:"bot"}];isLoading=!1;ngOnInit(){}toggleChat(){this.chatOpen=!this.chatOpen}sendMessage(){let i=this.messageText.trim();i&&(this.messages.push({text:i,from:"user"}),this.messageText="",this.isLoading=!0,this.chatService.sendMessage(i).subscribe({next:e=>{this.isLoading=!1,this.messages.push({text:e,from:"bot"})},error:()=>{this.isLoading=!1,this.messages.push({text:"Lo siento, ha ocurrido un error al procesar tu mensaje \u{1F614}",from:"bot"})}}))}static \u0275fac=function(e){return new(e||t)(b(Ne))};static \u0275cmp=S({type:t,selectors:[["app-musichat"]],decls:2,vars:2,consts:[["class","fixed bottom-8 right-8 w-16 h-16 rounded-full flex items-center justify-center shadow-lg","style","background-color:#AF52DE",3,"click",4,"ngIf"],["class","fixed bottom-8 right-8 w-[500px] h-[750px] bg-white shadow-2xl rounded-lg flex flex-col",4,"ngIf"],[1,"fixed","bottom-8","right-8","w-16","h-16","rounded-full","flex","items-center","justify-center","shadow-lg",2,"background-color","#AF52DE",3,"click"],["src","AbrirChat.png","alt","Abrir chat",1,"w-6","h-6"],[1,"fixed","bottom-8","right-8","w-[500px]","h-[750px]","bg-white","shadow-2xl","rounded-lg","flex","flex-col"],[1,"flex","items-start","p-4",2,"background-color","#AF52DE"],["src","LogoMusiChat.png","alt","Logo MusiChat",1,"w-10","h-10"],[1,"ml-3","text-white"],[1,"font-bold","text-2xl",2,"font-family","Poppins"],[1,"flex","items-center","text-xs",2,"font-family","Inter"],[1,"inline-block","w-2","h-2","rounded-full","mr-1",2,"background-color","#43EE7D"],[2,"color","#43EE7D"],[1,"ml-auto",3,"click"],["src","CerrarChat.png","alt","Cerrar chat",1,"w-5","h-5"],[1,"flex-1","overflow-y-auto","p-4","space-y-6","relative"],[4,"ngFor","ngForOf"],["src","LoadMessage.gif","alt","Cargando respuesta","class","absolute bottom-0 left-0 w-10 h-10",4,"ngIf"],[1,"flex","items-center","p-4","border-t","border-gray-200"],["type","text","placeholder","Escribe tu mensaje aqui...",1,"flex-1","px-4","py-2","rounded-lg","border","border-gray-300","focus:outline-none","focus:ring-2","focus:ring-purple-500",3,"ngModelChange","keyup.enter","ngModel"],[1,"ml-3",3,"click"],["src","MandarMensaje.png","alt","Enviar mensaje",1,"w-6","h-6"],["class","relative max-w-[80%]",4,"ngIf"],["class","relative ml-auto max-w-[80%]",4,"ngIf"],[1,"relative","max-w-[80%]"],[1,"bg-[#3C096C]","text-white","p-4","rounded-lg",2,"word-break","break-word"],["src","LogoMusiChat.png","alt","Avatar bot",1,"absolute","-bottom-4","-left-4","w-8","h-8","rounded-full","p-1",2,"background-color","#7B2CBF"],[1,"relative","ml-auto","max-w-[80%]"],[1,"bg-[#DEE2E6]","text-black","p-4","rounded-lg",2,"word-break","break-word"],["src","FotoPerfil.png","alt","Avatar usuario",1,"absolute","-bottom-4","-right-4","w-8","h-8"],["src","LoadMessage.gif","alt","Cargando respuesta",1,"absolute","bottom-0","left-0","w-10","h-10"]],template:function(e,o){e&1&&_(0,jt,2,0,"button",0)(1,Ut,19,3,"div",1),e&2&&(m("ngIf",!o.chatOpen),s(),m("ngIf",o.chatOpen))},dependencies:[M,G,E,Q,P,F,J,it],styles:["[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#c4c4c4;border-radius:3px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}"]})};function zt(t,i){t&1&&(V(0),g(1,"app-header")(2,"app-musichat"),j())}var Re=class t{constructor(i){this.router=i}title="musiconnect";static \u0275fac=function(e){return new(e||t)(b(x))};static \u0275cmp=S({type:t,selectors:[["app-root"]],decls:2,vars:1,consts:[[4,"ngIf"]],template:function(e,o){e&1&&(_(0,zt,3,0,"ng-container",0),g(1,"router-outlet")),e&2&&m("ngIf",o.router.url!=="/home"&&o.router.url!=="/register"&&o.router.url!=="/login")},dependencies:[ot,Ie,Oe,R,M,E],encapsulation:2})};function Wt(t,i){t&1&&(r(0,"p",26),l(1," El nombre es obligatorio y debe tener al menos 3 caracteres. "),n())}function qt(t,i){t&1&&(r(0,"p",26),l(1," La descripci\xF3n es obligatoria (m\xEDnimo 10 caracteres). "),n())}function Xt(t,i){t&1&&(r(0,"p",27),l(1," La fecha de inicio no puede ser posterior a la fecha de fin. "),n())}function Kt(t,i){if(t&1&&(r(0,"div",28),l(1),n()),t&2){let e=p();s(),O(" ",e.mensaje," ")}}var Pe=class t{constructor(i,e,o,a,d){this.collaborationService=i;this.session=e;this.notifications=o;this.postService=a;this.router=d}nombre="";descripcion="";fechaInicio="";fechaFin="";fechasValidas=!0;mensaje="";publicar(i){if(this.fechasValidas=new Date(this.fechaInicio)<=new Date(this.fechaFin),!this.fechasValidas){this.mensaje="\u274C La fecha de inicio no puede ser mayor a la fecha de fin.";return}let e={titulo:this.nombre,descripcion:this.descripcion,fechaInicio:this.fechaInicio,fechaFin:this.fechaFin,usuarioId:this.session.getUserId()??0};this.collaborationService.crearColaboracion(e).subscribe({next:o=>{this.mensaje="\u2705 \xA1Colaboraci\xF3n creada con \xE9xito!",this.notifications.push("Creaci\xF3n de tu colaboraci\xF3n puesta en publicaciones!","SUCCESS");let a=this.session.getNombreArtistico()??"Alguien",d=o.colaboracionId??o.id??0,C=`${a} ha creado una colaboraci\xF3n llamada <a href='/mostrar-colaboracion/${d}' class='text-blue-600 underline'>${this.nombre}</a> \xA1vayan a darle un vistaso si desean!`,ee=this.session.getUserId()??0;this.postService.crearPost({usuarioId:ee,contenido:C,tipo:"TEXTO"}).subscribe(),this.nombre="",this.descripcion="",this.fechaInicio="",this.fechaFin="",i.resetForm(),this.fechasValidas=!0,setTimeout(()=>{this.mensaje="",this.router.navigate(["/listar-colaboraciones"])},2e3)},error:o=>{this.mensaje=o.error?.message?`\u274C ${o.error.message}`:"\u274C Error al crear colaboraci\xF3n.",setTimeout(()=>{this.mensaje=""},2e3)}})}static \u0275fac=function(e){return new(e||t)(b(re),b(N),b(K),b(st),b(x))};static \u0275cmp=S({type:t,selectors:[["app-crear-colaboracion"]],decls:36,vars:9,consts:[["form","ngForm"],["nombreCtrl","ngModel"],["descripcionCtrl","ngModel"],["inicioCtrl","ngModel"],["finCtrl","ngModel"],[1,"max-w-6xl","mx-auto","px-6","py-12","grid","grid-cols-1","md:grid-cols-3","gap-8","font-bree"],[1,"md:col-span-2","space-y-8"],[1,"text-4xl","font-black"],["novalidate","",3,"ngSubmit"],["for","nombre"],["type","text","id","nombre","name","nombre","required","","minlength","3",1,"w-full","border","border-black","rounded","px-4","py-2",3,"ngModelChange","ngModel"],["class","text-red-600 text-sm",4,"ngIf"],["for","descripcion"],["id","descripcion","name","descripcion","required","","minlength","10",1,"w-full","border","border-black","rounded","px-4","py-2",3,"ngModelChange","ngModel"],[1,"flex","gap-4"],[1,"flex-1"],["for","inicio"],["type","date","id","inicio","name","fechaInicio","required","",1,"w-full","border","border-black","rounded","px-4","py-2",3,"ngModelChange","ngModel"],["for","fin"],["type","date","id","fin","name","fechaFin","required","",1,"w-full","border","border-black","rounded","px-4","py-2",3,"ngModelChange","ngModel"],["class","text-red-600 text-sm mt-2",4,"ngIf"],[1,"pt-6","text-center"],["type","submit",1,"bg-[#FF00FF]","text-white","text-xl","font-bold","px-10","py-4","rounded-xl","disabled:bg-gray-300","disabled:cursor-not-allowed",3,"disabled"],["class","mt-6 text-center text-lg font-semibold text-red-600",4,"ngIf"],[1,"hidden","md:flex","justify-center","items-start"],["src","/Megafono.png","alt","decoraci\xF3n",1,"w-64"],[1,"text-red-600","text-sm"],[1,"text-red-600","text-sm","mt-2"],[1,"mt-6","text-center","text-lg","font-semibold","text-red-600"]],template:function(e,o){if(e&1){let a=h();r(0,"div",5)(1,"div",6)(2,"h1",7),l(3,"Crear nueva colaboraci\xF3n"),n(),r(4,"form",8,0),c("ngSubmit",function(){u(a);let C=te(5);return f(o.publicar(C))}),r(6,"div")(7,"label",9),l(8,"Nombre del proyecto"),n(),r(9,"input",10,1),k("ngModelChange",function(C){return u(a),T(o.nombre,C)||(o.nombre=C),f(C)}),n(),_(11,Wt,2,0,"p",11),n(),r(12,"div")(13,"label",12),l(14,"Descripci\xF3n"),n(),r(15,"textarea",13,2),k("ngModelChange",function(C){return u(a),T(o.descripcion,C)||(o.descripcion=C),f(C)}),n(),_(17,qt,2,0,"p",11),n(),r(18,"div",14)(19,"div",15)(20,"label",16),l(21,"Fecha de inicio"),n(),r(22,"input",17,3),k("ngModelChange",function(C){return u(a),T(o.fechaInicio,C)||(o.fechaInicio=C),f(C)}),n()(),r(24,"div",15)(25,"label",18),l(26,"Fecha de fin"),n(),r(27,"input",19,4),k("ngModelChange",function(C){return u(a),T(o.fechaFin,C)||(o.fechaFin=C),f(C)}),n()()(),_(29,Xt,2,0,"p",20),r(30,"div",21)(31,"button",22),l(32," Publicar Colaboracion "),n()()(),_(33,Kt,2,1,"div",23),n(),r(34,"div",24),g(35,"img",25),n()()}if(e&2){let a=te(5),d=te(10),C=te(16);s(9),w("ngModel",o.nombre),s(2),m("ngIf",d.invalid&&d.touched),s(4),w("ngModel",o.descripcion),s(2),m("ngIf",C.invalid&&C.touched),s(5),w("ngModel",o.fechaInicio),s(5),w("ngModel",o.fechaFin),s(2),m("ngIf",!o.fechasValidas),s(2),m("disabled",a.invalid),s(2),m("ngIf",o.mensaje)}},dependencies:[M,E,Q,Z,P,F,Y,at,lt,J,he],encapsulation:2})};function Yt(t,i){t&1&&(r(0,"div",34)(1,"a",35)(2,"button",36),l(3,"Ingresa"),n()(),r(4,"a",37)(5,"button",38),l(6,"Registrate"),n()()())}function Jt(t,i){if(t&1){let e=h();r(0,"div",34)(1,"button",39),c("click",function(){u(e);let a=p();return f(a.volver())}),l(2,"Volver"),n()()}}function Zt(t,i){t&1&&(V(0),r(1,"a",35)(2,"button",43),l(3,"Ingresa"),n()(),r(4,"a",37)(5,"button",44),l(6,"Registrate"),n()(),j())}function Qt(t,i){if(t&1){let e=h();r(0,"button",45),c("click",function(){u(e);let a=p(2);return f(a.volver())}),l(1,"Volver"),n()}}function ei(t,i){if(t&1){let e=h();r(0,"div",40)(1,"a",41),c("click",function(){u(e);let a=p();return f(a.scrollTo("intro-section"))}),l(2,"Inicio"),n(),r(3,"a",41),c("click",function(){u(e);let a=p();return f(a.scrollTo("ecosistema-section"))}),l(4,"Ecosistema"),n(),r(5,"a",41),c("click",function(){u(e);let a=p();return f(a.scrollTo("acerca-section"))}),l(6,"Acerca de nosotros"),n(),_(7,Zt,7,0,"ng-container",42)(8,Qt,2,0,"ng-template",null,0,Je),n()}if(t&2){let e=te(9),o=p();s(7),m("ngIf",!o.isLogged)("ngIfElse",e)}}var Ae=class t{constructor(i,e){this.session=i;this.router=e}menuAbierto=!1;get isLogged(){return this.session.isLoggedIn()}volver(){this.router.navigate(["/publicaciones"])}scrollTo(i){let e=document.getElementById(i);e&&(e.scrollIntoView({behavior:"smooth"}),this.menuAbierto=!1)}toggleMenu(){this.menuAbierto=!this.menuAbierto}static \u0275fac=function(e){return new(e||t)(b(N),b(x))};static \u0275cmp=S({type:t,selectors:[["app-home"]],decls:74,vars:3,consts:[["volverMobile",""],[1,"home-header","w-full","px-6","py-4","shadow-md","sticky","top-0","z-50"],[1,"flex","justify-between","items-center"],[1,"flex","items-center","gap-2"],["src","/Logo.png","alt","Logo",1,"w-10","h-10"],[1,"text-2xl","font-poppins","font-bold"],[1,"md:hidden",3,"click"],["fill","none","stroke","currentColor","stroke-width","2","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","d","M4 6h16M4 12h16M4 18h16"],[1,"hidden","md:flex","gap-6","text-lg","font-bree"],[1,"cursor-pointer",3,"click"],["class","hidden md:flex gap-4",4,"ngIf"],["class","md:hidden mt-4 space-y-2 text-center font-bree",4,"ngIf"],[1,"home-main"],[1,"intro-section"],["id","intro-section",1,"intro-text"],[1,"intro-title"],[1,"intro-paragraph"],[1,"intro-image"],["src","/ManosUnidas.png","alt","Manos unidas"],["id","ecosistema-section",1,"funcionalidades","py-16"],[1,"text-center","max-w-2xl","mx-auto","mb-12","px-4"],[1,"text-base"],[1,"grid","md:grid-cols-3","gap-10","px-6"],[1,"func-card","bg-[#D9D9D9]","rounded","text-center","px-6","py-10"],["src","/Micro.png","alt","Microfono",1,"w-20","mx-auto","mb-6"],[1,"text-xl","font-bold","mb-2"],[1,"text-base","leading-relaxed"],["src","/Banda.png","alt","Banda",1,"w-20","mx-auto","mb-6"],["src","/Calendario.png","alt","Calendario",1,"w-20","mx-auto","mb-6"],["id","acerca-section",1,"acerca-de"],[1,"acerca-content"],["src","/Nosotros.png","alt","Equipo"],[1,"home-footer"],[1,"hidden","md:flex","gap-4"],["routerLink","/login"],[1,"btn-ingresa"],["routerLink","/register"],[1,"btn-registro"],[1,"btn-registro",3,"click"],[1,"md:hidden","mt-4","space-y-2","text-center","font-bree"],[1,"block",3,"click"],[4,"ngIf","ngIfElse"],[1,"btn-ingresa","w-full","mt-2"],[1,"btn-registro","w-full"],[1,"btn-registro","w-full","mt-2",3,"click"]],template:function(e,o){e&1&&(r(0,"header",1)(1,"div",2)(2,"div",3),g(3,"img",4),r(4,"span",5),l(5,"MusiConnect"),n()(),r(6,"button",6),c("click",function(){return o.toggleMenu()}),B(),r(7,"svg",7),g(8,"path",8),n()(),U(),r(9,"nav",9)(10,"a",10),c("click",function(){return o.scrollTo("intro-section")}),l(11,"Inicio"),n(),r(12,"a",10),c("click",function(){return o.scrollTo("ecosistema-section")}),l(13,"Ecosistema"),n(),r(14,"a",10),c("click",function(){return o.scrollTo("acerca-section")}),l(15,"Acerca de nosotros"),n()(),_(16,Yt,7,0,"div",11)(17,Jt,3,0,"div",11),n(),_(18,ei,10,2,"div",12),n(),r(19,"main",13)(20,"section",14)(21,"div",15)(22,"h1",16),l(23,"\u201CLa m\xFAsica nos une, nosotros la conectamos\u201D"),n(),r(24,"p",17),l(25,"MusiConnect es una plataforma web creada para revolucionar la manera en que los m\xFAsicos se descubren, colaboran y crecen juntos. Buscamos impulsar el talento art\xEDstico construyendo un ecosistema digital inclusivo, donde cada m\xFAsico, sin importar su nivel, pueda encontrar su lugar, formar conexiones reales y brillar en comunidad."),n()(),r(26,"div",18),g(27,"img",19),n()(),r(28,"section",20)(29,"div",21)(30,"p",22),l(31,"Creamos herramientas dise\xF1adas para potenciar cada etapa del camino musical: desde el primer ensayo hasta tu pr\xF3xima colaboraci\xF3n estelar."),n()(),r(32,"div",23)(33,"div",24),g(34,"img",25),r(35,"h3",26),l(36,"Perfiles musicales personalizados"),n(),r(37,"p",27),l(38,"Muestra qui\xE9n eres como artista: comparte tu estilo, experiencia, influencias y disponibilidad."),n()(),r(39,"div",24),g(40,"img",28),r(41,"h3",26),l(42,"Forma tu banda ideal"),n(),r(43,"p",27),l(44,"Conecta con m\xFAsicos afines seg\xFAn intereses y estilo. Publica convocatorias o responde a oportunidades para crear m\xFAsica juntos."),n()(),r(45,"div",24),g(46,"img",29),r(47,"h3",26),l(48,"Gesti\xF3n de eventos y ensayos"),n(),r(49,"p",27),l(50,"Organiza tus actividades musicales en un solo lugar: ensayos, reuniones creativas, conciertos o grabaciones, todo con recordatorios integrados."),n()()()(),r(51,"section",30)(52,"h2"),l(53,"Acerca de nosotros"),n(),r(54,"div",31),g(55,"img",32),r(56,"div")(57,"h3"),l(58,"\xBFPor qu\xE9 creamos MusiConnect?"),n(),r(59,"p"),l(60,"MusiConnect nace del deseo de transformar la manera en que los m\xFAsicos se conocen, colaboran y se apoyan."),g(61,"br")(62,"br"),l(63,"Somos un grupo de j\xF3venes apasionados por la m\xFAsica y la tecnolog\xEDa, comprometidos con crear un espacio inclusivo, creativo y accesible para todos."),g(64,"br")(65,"br"),l(66,"Queremos que ning\xFAn talento quede sin ser escuchado."),n()()()()(),r(67,"footer",33)(68,"p"),l(69,"Inicio | Ecosistema | Acerca de | Contacto"),n(),r(70,"p"),l(71,"Instagram, TikTok, YouTube"),n(),r(72,"p"),l(73,"\xA9 2025 MusiConnect. Todos los derechos reservados."),n()()),e&2&&(s(16),m("ngIf",!o.isLogged),s(),m("ngIf",o.isLogged),s(),m("ngIf",o.menuAbierto))},dependencies:[M,E,R,H],styles:['.home-header[_ngcontent-%COMP%]{background-color:#ffe6ff;font-family:"Bree Serif",serif;width:100%}.font-poppins[_ngcontent-%COMP%]{font-family:Poppins,sans-serif}.home-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-family:"Bree Serif",serif;margin-left:1.5rem;margin-right:1.5rem;font-size:1.125rem;text-decoration:none}.btn-ingresa[_ngcontent-%COMP%]{background-color:#ff48ff;color:#000;font-family:"Bree Serif",serif;font-weight:600;padding:.5rem 1.5rem;border-radius:15px}.btn-registro[_ngcontent-%COMP%]{background-color:#b511b5;color:#fff;font-family:"Bree Serif",serif;font-weight:600;padding:.5rem 1.5rem;border-radius:15px}.intro-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:2rem;padding:3rem 1.5rem}@media (min-width: 768px){.intro-section[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}}.intro-title[_ngcontent-%COMP%]{font-size:2.5rem;font-family:Poppins,sans-serif;font-weight:700;line-height:1.3}.intro-paragraph[_ngcontent-%COMP%]{font-family:"Bree Serif",serif;margin-top:1.5rem;font-size:1.125rem}.funcionalidades[_ngcontent-%COMP%]{background-color:#f1efef;padding:4rem 1.5rem;text-align:center}@media (min-width: 768px){.func-cards[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}.func-card[_ngcontent-%COMP%]{background-color:#d9d9d9;padding:1.5rem;border-radius:.5rem;box-shadow:0 2px 6px #0000001a}.funcionalidades[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:"Bree Serif",serif}.acerca-de[_ngcontent-%COMP%]{padding:4rem 1.5rem}.acerca-de[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-size:2.25rem;font-weight:700;text-align:center;margin-bottom:2rem}.acerca-content[_ngcontent-%COMP%]{display:grid;gap:2rem}@media (min-width: 768px){.acerca-content[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr;align-items:center}}.acerca-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:"Bree Serif",serif;font-size:1.25rem;font-weight:700;margin-bottom:1rem}.acerca-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:"Bree Serif",serif;font-size:1rem;line-height:1.6}.home-footer[_ngcontent-%COMP%]{background-color:#000;color:#fff;text-align:center;padding:2rem 1rem;font-family:"Bree Serif",serif;font-size:.875rem}']})};function ti(t,i){if(t&1&&(r(0,"div",29)(1,"span"),l(2),n()()),t&2){let e=p();s(),Ke(e.tipoMensaje==="success"?"text-sm text-green-600 font-medium px-3 py-1 bg-green-100 rounded-md":"text-sm text-red-600 font-medium px-3 py-1 bg-red-100 rounded-md"),s(),O(" ",e.mensajeAccion," ")}}function ii(t,i){t&1&&(r(0,"div",30)(1,"div",31),B(),r(2,"svg",32),g(3,"path",33),n()(),U(),r(4,"span",34),l(5,"Colaboraci\xF3n actualizada correctamente."),n()())}function ni(t,i){if(t&1&&(r(0,"option",35),l(1),n()),t&2){let e=i.$implicit;m("value",e),s(),I(e)}}var Fe=class t{constructor(i,e,o,a){this.route=i;this.router=e;this.collabSrv=o;this.session=a}projectName="";description="";startDate="";endDate="";status="";collaborator="";statusOptions=[];mostrarMensajeExito=!1;mensajeAccion="";tipoMensaje="success";id;currentUserId=null;ngOnInit(){this.id=+this.route.snapshot.paramMap.get("id"),this.currentUserId=this.session.getUserId(),this.collabSrv.getEstados().subscribe(i=>this.statusOptions=i),this.collabSrv.getById(this.id).subscribe(i=>{let e=this.session.getNombreArtistico(),o=i;if(!(e&&o.nombreUsuario===e||this.currentUserId!==null&&o.usuarioId===this.currentUserId)){this.tipoMensaje="error",this.mensajeAccion="No tiene permisos para editar esta colaboraci\xF3n.",setTimeout(()=>this.mensajeAccion="",3e3),this.router.navigate(["/listar-colaboraciones"]);return}this.fillForm(i)})}fillForm(i){this.projectName=i.titulo,this.description=i.descripcion,this.startDate=i.fechaInicio,this.endDate=i.fechaFin,this.status=i.estado}saveChanges(){let i={titulo:this.projectName,descripcion:this.description,fechaInicio:this.startDate,fechaFin:this.endDate,estado:this.status,usuarioId:this.currentUserId};this.collabSrv.update(this.id,i).subscribe({next:()=>{this.tipoMensaje="success",this.mensajeAccion="Colaboraci\xF3n actualizada correctamente",setTimeout(()=>this.mensajeAccion="",3e3)},error:e=>{this.tipoMensaje="error",this.mensajeAccion=e.error?.message??"Error al actualizar",setTimeout(()=>this.mensajeAccion="",3e3)}})}addCollaborator(){this.collaborator.trim()&&this.collabSrv.addMember(this.id,this.collaborator.trim()).subscribe({next:()=>{this.tipoMensaje="success",this.mensajeAccion="Colaborador a\xF1adido \u2705",setTimeout(()=>this.mensajeAccion="",3e3),this.collaborator=""},error:i=>{this.tipoMensaje="error",this.mensajeAccion=i.error?.message??"No se pudo a\xF1adir",setTimeout(()=>this.mensajeAccion="",3e3)}})}cancelChanges(){this.router.navigate(["/listar-colaboraciones"])}deleteCollaboration(){if(confirm("\xBFEliminar esta colaboraci\xF3n?")){if(this.currentUserId===null){this.tipoMensaje="error",this.mensajeAccion="Sesi\xF3n inv\xE1lida",setTimeout(()=>this.mensajeAccion="",3e3);return}this.collabSrv.delete(this.id,this.currentUserId).subscribe({next:()=>this.router.navigate(["/crear-colaboracion"]),error:i=>{this.tipoMensaje="error",this.mensajeAccion=i.error?.message??"Error al eliminar",setTimeout(()=>this.mensajeAccion="",3e3)}})}}static \u0275fac=function(e){return new(e||t)(b(nt),b(x),b(re),b(N))};static \u0275cmp=S({type:t,selectors:[["app-editar-colaboracion"]],decls:48,vars:9,consts:[[1,"min-h-screen","bg-white","p-8","font-bree"],[1,"max-w-4xl","mx-auto"],[1,"flex","justify-between","items-start","mb-12"],[1,"text-4xl","font-bold","text-black"],[1,"relative"],["src","/Megafono.png","alt","Decoraci\xF3n",1,"w-40","object-contain"],["class","mb-6 flex justify-center",4,"ngIf"],["class","bg-pinkfigma rounded-xl p-4 px-6 mb-8 flex items-center",4,"ngIf"],[1,"space-y-8"],["for","projectName",1,"block","text-lg","font-medium","text-black","mb-2"],["id","projectName","name","projectName","type","text",1,"w-full","h-14","px-4","border-2","border-black","rounded-xl","text-lg","focus:outline-none","focus:border-custom-purple",3,"ngModelChange","ngModel"],["for","description",1,"block","text-lg","font-medium","text-black","mb-2"],["id","description","name","description","rows","4",1,"w-full","h-40","px-4","py-3","border-2","border-black","rounded-xl","text-lg","resize-none","focus:outline-none","focus:border-custom-purple",3,"ngModelChange","ngModel"],[1,"grid","md:grid-cols-2","gap-6"],["for","startDate",1,"block","text-lg","font-medium","text-black","mb-2"],["id","startDate","name","startDate","type","date",1,"w-full","h-14","px-4","border-2","border-black","rounded-xl","text-lg","focus:outline-none","focus:border-custom-purple",3,"ngModelChange","ngModel"],["for","endDate",1,"block","text-lg","font-medium","text-black","mb-2"],["id","endDate","name","endDate","type","date",1,"w-full","h-14","px-4","border-2","border-black","rounded-xl","text-lg","focus:outline-none","focus:border-custom-purple",3,"ngModelChange","ngModel"],["for","status",1,"block","text-lg","font-medium","text-black","mb-2"],["id","status","name","status",1,"w-full","h-14","px-4","border-2","border-black","rounded-xl","text-lg","appearance-none","bg-white","focus:outline-none","focus:border-custom-purple",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","collaborator",1,"block","text-lg","font-medium","text-black","mb-2"],["id","collaborator","name","collaborator","type","text","placeholder","Ingrese nombre Art\xEDstico del colaborador...",1,"w-full","h-14","px-4","pr-14","border-2","border-black","rounded-xl","text-lg","focus:outline-none","focus:border-custom-purple",3,"ngModelChange","keyup.enter","ngModel"],["type","button",1,"absolute","inset-y-0","right-0","flex","items-center","justify-center","w-14","text-black","hover:opacity-80",3,"click"],["viewBox","0 0 24 24","fill","currentColor",1,"w-6","h-6"],["d","M19 11H13V5h-2v6H5v2h6v6h2v-6h6z"],[1,"flex","flex-col","sm:flex-row","gap-4","pt-6"],["type","button",1,"flex-1","bg-[#C800E3]","text-white","py-4","px-8","rounded-xl","font-semibold","text-lg","hover:opacity-90","transition-opacity",3,"click"],["type","button",1,"flex-1","bg-white","text-black","py-4","px-8","rounded-xl","font-semibold","text-lg","border-2","border-black","hover:bg-gray-50","transition",3,"click"],[1,"mb-6","flex","justify-center"],[1,"bg-pinkfigma","rounded-xl","p-4","px-6","mb-8","flex","items-center"],[1,"w-8","h-8","bg-black","rounded-full","flex","items-center","justify-center","mr-4"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5","text-white"],["fill-rule","evenodd","d","M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule","evenodd"],[1,"text-black","font-medium"],[3,"value"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),l(4,"Editar colaboraci\xF3n"),n(),r(5,"div",4),g(6,"img",5),n()(),_(7,ti,3,3,"div",6)(8,ii,6,0,"div",7),r(9,"form",8)(10,"div")(11,"label",9),l(12,"Nombre del proyecto"),n(),r(13,"input",10),k("ngModelChange",function(d){return T(o.projectName,d)||(o.projectName=d),d}),n()(),r(14,"div")(15,"label",11),l(16,"Descripci\xF3n"),n(),r(17,"textarea",12),k("ngModelChange",function(d){return T(o.description,d)||(o.description=d),d}),n()(),r(18,"div",13)(19,"div")(20,"label",14),l(21,"Fecha de inicio"),n(),r(22,"input",15),k("ngModelChange",function(d){return T(o.startDate,d)||(o.startDate=d),d}),n()(),r(23,"div")(24,"label",16),l(25,"Fecha de fin"),n(),r(26,"input",17),k("ngModelChange",function(d){return T(o.endDate,d)||(o.endDate=d),d}),n()()(),r(27,"div",13)(28,"div")(29,"label",18),l(30,"Estado"),n(),r(31,"select",19),k("ngModelChange",function(d){return T(o.status,d)||(o.status=d),d}),_(32,ni,2,2,"option",20),n()(),r(33,"div")(34,"label",21),l(35,"A\xF1adir colaborador"),n(),r(36,"div",4)(37,"input",22),k("ngModelChange",function(d){return T(o.collaborator,d)||(o.collaborator=d),d}),c("keyup.enter",function(){return o.addCollaborator()}),n(),r(38,"button",23),c("click",function(){return o.addCollaborator()}),B(),r(39,"svg",24),g(40,"path",25),n()()()()(),U(),r(41,"div",26)(42,"button",27),c("click",function(){return o.saveChanges()}),l(43,"Guardar cambios"),n(),r(44,"button",28),c("click",function(){return o.cancelChanges()}),l(45,"Cancelar Cambios"),n(),r(46,"button",28),c("click",function(){return o.deleteCollaboration()}),l(47,"Eliminar colaboraci\xF3n"),n()()()()()),e&2&&(s(7),m("ngIf",o.mensajeAccion),s(),m("ngIf",o.mostrarMensajeExito),s(5),w("ngModel",o.projectName),s(4),w("ngModel",o.description),s(5),w("ngModel",o.startDate),s(4),w("ngModel",o.endDate),s(5),w("ngModel",o.status),s(),m("ngForOf",o.statusOptions),s(5),w("ngModel",o.collaborator))},dependencies:[M,G,E,Q,Z,Ee,Me,P,Se,F,Y,J,he],encapsulation:2})};function oi(t,i){t&1&&(r(0,"a",20),l(1," Crear colaboraci\xF3n "),n())}function ri(t,i){if(t&1){let e=h();V(0),r(1,"div",21)(2,"div",22)(3,"h3",23),l(4),n(),r(5,"span",24),l(6),n()(),r(7,"p",25),l(8),n(),r(9,"button",26),c("click",function(){let a=u(e).$implicit,d=p();return f(d.verColaboracion(a.colaboracionId))}),l(10," Ver colaboraci\xF3n "),n()(),j()}if(t&2){let e=i.$implicit,o=p();s(4),I(e.titulo),s(),m("ngClass",o.estadoClass(e.estado)),s(),O(" ",e.estado," "),s(2),I(e.descripcion)}}function ai(t,i){t&1&&(r(0,"div",27),g(1,"img",28),r(2,"p",29),l(3,"No hay colaboraciones actualmente"),n()())}function li(t,i){if(t&1){let e=h();r(0,"button",33),c("click",function(){let a=u(e).$implicit,d=p(2);return f(d.irAPagina(a))}),l(1),n()}if(t&2){let e=i.$implicit,o=p(2);m("ngClass",o.currentPage===e?"bg-[#000784] text-white":"text-[#000784]"),s(),O(" ",e," ")}}function si(t,i){if(t&1){let e=h();r(0,"div",30)(1,"button",31),c("click",function(){u(e);let a=p();return f(a.paginaAnterior())}),l(2," \u2039 "),n(),_(3,li,2,2,"button",32),r(4,"button",31),c("click",function(){u(e);let a=p();return f(a.paginaSiguiente())}),l(5," \u203A "),n()()}if(t&2){let e=p();s(),m("disabled",e.currentPage===1),s(2),m("ngForOf",e.paginas),s(),m("disabled",e.currentPage===e.totalPaginas)}}var Le=class t{constructor(i,e){this.collaborationSvc=i;this.router=e}collaborations=[];searchTerm="";soloActivas=!1;COLABS_POR_PAGINA=12;currentPage=1;ngOnInit(){this.loadCollaborations()}loadCollaborations(){this.soloActivas?this.collaborationSvc.getActive().subscribe(i=>{this.collaborations=i.sort((e,o)=>o.colaboracionId-e.colaboracionId),this.currentPage=1}):this.collaborationSvc.getAll().subscribe(i=>{this.collaborations=i.sort((e,o)=>o.colaboracionId-e.colaboracionId),this.currentPage=1})}buscar(){let i=this.searchTerm.trim();i?this.collaborationSvc.getByNombreArtistico(i).subscribe(e=>{this.collaborations=e.sort((o,a)=>a.colaboracionId-o.colaboracionId),this.currentPage=1}):this.loadCollaborations()}toggleActivas(){this.soloActivas=!this.soloActivas,this.loadCollaborations()}recargar(){this.buscar()}verColaboracion(i){this.router.navigate(["/mostrar-colaboracion",i])}estadoClass(i){switch(i?.toLowerCase()){case"pendiente":return"bg-[#FF8DFF]";case"en progreso":case"en_progreso":case"enprogreso":return"bg-[#8D278D]";case"finalizado":return"bg-[#000784]";default:return"bg-gray-400"}}get totalPaginas(){return Math.max(1,Math.ceil(this.collaborations.length/this.COLABS_POR_PAGINA))}get paginas(){return Array.from({length:this.totalPaginas},(i,e)=>e+1)}get collaborationsPagina(){let i=(this.currentPage-1)*this.COLABS_POR_PAGINA;return this.collaborations.slice(i,i+this.COLABS_POR_PAGINA)}irAPagina(i){i>=1&&i<=this.totalPaginas&&(this.currentPage=i)}paginaAnterior(){this.currentPage>1&&this.currentPage--}paginaSiguiente(){this.currentPage<this.totalPaginas&&this.currentPage++}static \u0275fac=function(e){return new(e||t)(b(re),b(x))};static \u0275cmp=S({type:t,selectors:[["app-listar-colaboraciones"]],decls:24,vars:5,consts:[[1,"p-8"],[1,"flex","justify-between","items-center","mb-8"],[1,"text-3xl","font-black"],["routerLink","/crear-colaboracion","class","bg-[#000784] text-white font-bree px-4 py-2 rounded-[15px] hover:bg-[#0005a0] transition-colors",4,"appHasRole"],[1,"flex","flex-col","gap-6","md:flex-row","md:items-start","md:justify-between"],[1,"w-full","max-w-lg","space-y-4"],["for","busqueda",1,"sr-only"],[1,"relative"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"absolute","left-3","top-1/2","-translate-y-1/2","h-5","w-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],["id","busqueda","type","text","placeholder","Buscar colaboraci\xF3n por nombre Art\xEDstico...",1,"w-full","rounded-md","border","border-gray-300","py-3","pl-10","pr-4","text-sm","placeholder-gray-500","focus:border-gray-700","focus:outline-none","focus:ring-2","focus:ring-gray-600","font-[\\'Bree","Serif\\']",3,"ngModelChange","keyup.enter","ngModel"],["type","button",1,"rounded-md","border-2","border-gray-900","bg-white","py-2","px-4","text-sm","text-gray-800","hover:bg-gray-50",3,"click"],[1,"hidden","md:flex","items-center","gap-2","self-center","md:self-start"],["type","button","aria-label","Actualizar listado",1,"flex","items-center","gap-2",3,"click"],["src","Reload.png","alt","Icono actualizar",1,"h-6","w-6"],[1,"text-base","text-black"],[1,"mt-8","grid","grid-cols-1","gap-6","sm:grid-cols-2","lg:grid-cols-3","xl:grid-cols-4"],[4,"ngFor","ngForOf"],["class","col-span-full flex flex-col items-center gap-4 py-12 text-center",4,"ngIf"],["class","flex justify-center mt-8 items-center gap-2 font-bree",4,"ngIf"],["routerLink","/crear-colaboracion",1,"bg-[#000784]","text-white","font-bree","px-4","py-2","rounded-[15px]","hover:bg-[#0005a0]","transition-colors"],[1,"card","flex","flex-col","gap-3","rounded-lg","border-2","border-gray-900","p-4"],[1,"flex","items-center","justify-between"],[1,"text-xl","leading-tight","font-[\\'Bree","Serif\\']"],[1,"inline-block","rounded","px-2","py-0.5","text-xs","text-white",3,"ngClass"],[1,"text-base"],["type","button",1,"mt-auto","rounded-md","bg-[#000784]","py-2","text-white","hover:brightness-110",3,"click"],[1,"col-span-full","flex","flex-col","items-center","gap-4","py-12","text-center"],["src","NoMoreColabs.png","alt","Sin colaboraciones",1,"w-52"],[1,"text-xl","font-[\\'Bree","Serif\\']"],[1,"flex","justify-center","mt-8","items-center","gap-2","font-bree"],[1,"px-3","py-1","rounded","hover:bg-gray-200","disabled:bg-gray-300","disabled:cursor-not-allowed",3,"click","disabled"],["class","w-8 h-8 rounded-full flex items-center justify-center hover:bg-gray-200",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"w-8","h-8","rounded-full","flex","items-center","justify-center","hover:bg-gray-200",3,"click","ngClass"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"div",1)(2,"h1",2),l(3,"Colaboraciones"),n(),_(4,oi,2,0,"a",3),n(),r(5,"div",4)(6,"div",5)(7,"label",6),l(8,"Buscar colaboraci\xF3n"),n(),r(9,"div",7),B(),r(10,"svg",8),g(11,"path",9),n(),U(),r(12,"input",10),k("ngModelChange",function(d){return T(o.searchTerm,d)||(o.searchTerm=d),d}),c("keyup.enter",function(){return o.buscar()}),n()(),r(13,"button",11),c("click",function(){return o.toggleActivas()}),l(14," Listar solo colaboraciones activas "),n()(),r(15,"div",12)(16,"button",13),c("click",function(){return o.recargar()}),g(17,"img",14),r(18,"span",15),l(19,"Actualizar"),n()()()(),r(20,"div",16),_(21,ri,11,4,"ng-container",17)(22,ai,4,0,"div",18),n(),_(23,si,6,3,"div",19),n()),e&2&&(s(4),m("appHasRole","MUSICO"),s(8),w("ngModel",o.searchTerm),s(9),m("ngForOf",o.collaborationsPagina),s(),m("ngIf",!o.collaborations.length),s(),m("ngIf",o.totalPaginas>1))},dependencies:[M,X,G,E,Q,P,F,J,R,H,Ce],styles:['[_nghost-%COMP%]{font-family:"Bree Serif",serif}.card[_ngcontent-%COMP%]{min-height:220px}']})};var De=class t{constructor(i){this.http=i}baseUrl=Te.apiUrl;get(i){return this.http.get(`${this.baseUrl}${i}`)}post(i,e){return this.http.post(`${this.baseUrl}${i}`,e)}put(i,e){return this.http.put(`${this.baseUrl}${i}`,e)}delete(i){return this.http.delete(`${this.baseUrl}${i}`)}patch(i,e){return this.http.patch(`${this.baseUrl}${i}`,e)}static \u0275fac=function(e){return new(e||t)(oe(be))};static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})};var ae=class t{constructor(i){this.api=i}register(i){return this.api.post("/auth/signup",i)}login(i){return this.api.post("/auth/login",i)}static \u0275fac=function(e){return new(e||t)(oe(De))};static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})};var pt=t=>({"selected-role":t});function mi(t,i){if(t&1&&(r(0,"option",37),l(1),n()),t&2){let e=i.$implicit;m("value",e),s(),I(e)}}function di(t,i){if(t&1&&(r(0,"p",38),l(1),n()),t&2){let e=p();m("ngClass",e.isError?"text-red-600":"text-green-600"),s(),I(e.mensaje)}}var Ve=class t{constructor(i,e,o,a){this.fb=i;this.authService=e;this.session=o;this.router=a;this.registerForm=this.fb.group({email:["",[A.required,A.email]],username:["",A.required],password:["",A.required],confirmPassword:["",A.required],country:["",A.required],role:["MUSICO",A.required]})}registerForm;mensaje="";isError=!1;paises=["Afganist\xE1n","Albania","Alemania","Andorra","Angola","Antigua y Barbuda","Arabia Saudita","Argelia","Argentina","Armenia","Australia","Austria","Azerbaiy\xE1n","Bahamas","Banglad\xE9s","Barbados","Bar\xE9in","B\xE9lgica","Belice","Ben\xEDn","Bielorrusia","Birmania","Bolivia","Bosnia y Herzegovina","Botsuana","Brasil","Brun\xE9i","Bulgaria","Burkina Faso","Burundi","But\xE1n","Cabo Verde","Camboya","Camer\xFAn","Canad\xE1","Catar","Chad","Chile","China","Chipre","Ciudad del Vaticano","Colombia","Comoras","Corea del Norte","Corea del Sur","Costa de Marfil","Costa Rica","Croacia","Cuba","Dinamarca","Dominica","Ecuador","Egipto","El Salvador","Emiratos \xC1rabes Unidos","Eritrea","Eslovaquia","Eslovenia","Espa\xF1a","Estados Unidos","Estonia","Etiop\xEDa","Filipinas","Finlandia","Fiyi","Francia","Gab\xF3n","Gambia","Georgia","Ghana","Granada","Grecia","Guatemala","Guyana","Guinea","Guinea-Bis\xE1u","Guinea Ecuatorial","Hait\xED","Honduras","Hungr\xEDa","India","Indonesia","Irak","Ir\xE1n","Irlanda","Islandia","Islas Marshall","Islas Salom\xF3n","Israel","Italia","Jamaica","Jap\xF3n","Jordania","Kazajist\xE1n","Kenia","Kirguist\xE1n","Kiribati","Kuwait","Laos","Lesoto","Letonia","L\xEDbano","Liberia","Libia","Liechtenstein","Lituania","Luxemburgo","Macedonia del Norte","Madagascar","Malasia","Malaui","Maldivas","Mal\xED","Malta","Marruecos","Mauricio","Mauritania","M\xE9xico","Micronesia","Moldavia","M\xF3naco","Mongolia","Montenegro","Mozambique","Namibia","Nauru","Nepal","Nicaragua","N\xEDger","Nigeria","Noruega","Nueva Zelanda","Om\xE1n","Pa\xEDses Bajos","Pakist\xE1n","Palaos","Panam\xE1","Pap\xFAa Nueva Guinea","Paraguay","Per\xFA","Polonia","Portugal","Reino Unido","Rep\xFAblica Centroafricana","Rep\xFAblica Checa","Rep\xFAblica del Congo","Rep\xFAblica Democr\xE1tica del Congo","Rep\xFAblica Dominicana","Ruanda","Ruman\xEDa","Rusia","Samoa","San Crist\xF3bal y Nieves","San Marino","San Vicente y las Granadinas","Santa Luc\xEDa","Santo Tom\xE9 y Pr\xEDncipe","Senegal","Serbia","Seychelles","Sierra Leona","Singapur","Siria","Somalia","Sri Lanka","Suazilandia","Sud\xE1frica","Sud\xE1n","Sud\xE1n del Sur","Suecia","Suiza","Surinam","Tailandia","Tanzania","Tayikist\xE1n","Timor Oriental","Togo","Tonga","Trinidad y Tobago","T\xFAnez","Turkmenist\xE1n","Turqu\xEDa","Tuvalu","Ucrania","Uganda","Uruguay","Uzbekist\xE1n","Vanuatu","Venezuela","Vietnam","Yemen","Yibuti","Zambia","Zimbabue"];isRoleSelected(i){return this.registerForm.get("role")?.value===i}selectRole(i){this.registerForm.get("role")?.setValue(i)}onSubmit(){if(this.registerForm.valid){let i=this.registerForm.value,e=i.role==="MUSICO"?2:3,o={email:i.email,password:i.password,nombreArtistico:i.username,ubicacion:i.country,roleId:e};this.authService.register(o).subscribe({next:a=>{this.session.setSession(a),this.isError=!1,this.mensaje=a.mensaje??"Registro exitoso";let d=a.userId;setTimeout(()=>this.router.navigate(["/ver-perfil",d]),1e3)},error:a=>{this.isError=!0,a.error?this.mensaje=a.error.error??a.error.mensaje??"Error inesperado.":a.status===0?this.mensaje="No se pudo conectar con el servidor.":this.mensaje=`Error inesperado (c\xF3digo ${a.status}).`,setTimeout(()=>this.mensaje="",5e3)}})}else console.warn("Formulario inv\xE1lido")}static \u0275fac=function(e){return new(e||t)(b(ye),b(ae),b(N),b(x))};static \u0275cmp=S({type:t,selectors:[["app-register"]],decls:42,vars:10,consts:()=>{let i;i=$localize`Ingresa tus datos`;let e;e=$localize`Correo electrónico`;let o;o=$localize`Nombre de usuario`;let a;a=$localize`Contraseña`;let d;d=$localize`Repetir contraseña`;let C;C=$localize`País`;let ee;ee=$localize`Seleccione un país`;let de;de=$localize`Escoger un rol`;let pe;pe=$localize` MUSICO `;let Ge;Ge=$localize` PRODUCTOR `;let He;He=$localize` Registrar `;let $e;return $e=$localize` ¿Tienes una cuenta? ${"\uFFFD#41\uFFFD"}:START_LINK:Ingresa aquí${"\uFFFD/#41\uFFFD"}:CLOSE_LINK:`,[i,e,o,a,d,C,ee,de,pe,Ge,He,$e,[1,"register-background","min-h-screen","flex","items-center","justify-center","bg-cover","bg-center"],[1,"register-card","flex","flex-col","items-center","px-8","py-10"],[1,"heading","font-poppins"],[1,"flex","flex-col","items-center","w-full",3,"ngSubmit","formGroup"],[1,"form-control"],["for","email",1,"font-bree"],["id","email","type","email","formControlName","email","placeholder","correo@ejemplo.com",1,"w-full","border","border-black","py-2","px-4","font-bree"],["for","username",1,"font-bree"],["id","username","type","text","formControlName","username","placeholder","Nombre de usuario",1,"w-full","border","border-black","py-2","px-4","font-bree"],["for","password",1,"font-bree"],["id","password","type","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"w-full","border","border-black","py-2","px-4","font-bree"],["for","confirmPassword",1,"font-bree"],["id","confirmPassword","type","password","formControlName","confirmPassword","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"w-full","border","border-black","py-2","px-4","font-bree"],["for","country",1,"font-bree"],["id","country","formControlName","country","aria-label","Selector de pa\xEDs",1,"w-full","border","border-black","py-2","px-4","font-bree","bg-white"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-control","role-fieldset"],[1,"font-bree","mb-2"],[1,"role-container"],[1,"role-option","cursor-pointer","font-bree",3,"click","ngClass"],["type","submit",1,"register-button","mb-2","disabled:bg-gray-300","disabled:cursor-not-allowed",3,"disabled"],[3,"ngClass",4,"ngIf"],[1,"subheading","font-poppins","mt-4"],["routerLink","/login",1,"link"],[3,"value"],[3,"ngClass"]]},template:function(e,o){e&1&&(r(0,"div",12)(1,"div",13)(2,"h1",14),y(3,0),n(),r(4,"form",15),c("ngSubmit",function(){return o.onSubmit()}),r(5,"div",16)(6,"label",17),y(7,1),n(),g(8,"input",18),n(),r(9,"div",16)(10,"label",19),y(11,2),n(),g(12,"input",20),n(),r(13,"div",16)(14,"label",21),y(15,3),n(),g(16,"input",22),n(),r(17,"div",16)(18,"label",23),y(19,4),n(),g(20,"input",24),n(),r(21,"div",16)(22,"label",25),y(23,5),n(),r(24,"select",26)(25,"option",27),y(26,6),n(),_(27,mi,2,2,"option",28),n()(),r(28,"fieldset",29)(29,"legend",30),y(30,7),n(),r(31,"div",31)(32,"div",32),c("click",function(){return o.selectRole("MUSICO")}),y(33,8),n(),r(34,"div",32),c("click",function(){return o.selectRole("PRODUCTOR")}),y(35,9),n()()(),r(36,"button",33),y(37,10),n(),_(38,di,2,2,"p",34),r(39,"p",35),ue(40,11),g(41,"a",36),fe(),n()()()()),e&2&&(s(4),m("formGroup",o.registerForm),s(23),m("ngForOf",o.paises),s(5),m("ngClass",le(6,pt,o.isRoleSelected("MUSICO"))),s(2),m("ngClass",le(8,pt,o.isRoleSelected("PRODUCTOR"))),s(2),m("disabled",o.registerForm.invalid),s(2),m("ngIf",o.mensaje))},dependencies:[M,X,G,E,we,Z,Ee,Me,P,Se,F,Y,ve,xe,R,H],styles:['.font-poppins[_ngcontent-%COMP%]{font-family:Poppins,sans-serif}.font-bree[_ngcontent-%COMP%]{font-family:"Bree Serif",serif}.register-background[_ngcontent-%COMP%]{background-image:url(/FondoRegister.png)}.register-card[_ngcontent-%COMP%]{width:691px;height:804px;background-color:#fff;border:1px solid #000000}.heading[_ngcontent-%COMP%]{font-size:48px;font-weight:700}.subheading[_ngcontent-%COMP%]{font-size:16px;font-weight:600}.link[_ngcontent-%COMP%]{color:#69aaff}.form-control[_ngcontent-%COMP%]{width:80%;margin-bottom:1rem}.form-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;border-radius:15px}.half-width[_ngcontent-%COMP%]{width:40%;align-self:flex-start}.role-container[_ngcontent-%COMP%]{display:flex;width:80%;border:1px solid #000000}.role-option[_ngcontent-%COMP%]{flex:1;text-align:center;padding:.5rem 0;background-color:#d9d9d9;border-right:1px solid #000000;font-weight:700}.role-option[_ngcontent-%COMP%]:last-child{border-right:none}.selected-role[_ngcontent-%COMP%]{background-color:#8d278d;color:#fff}.register-button[_ngcontent-%COMP%]{width:175px;height:60px;background-color:#ba07c3;border-radius:20px;color:#fff;font-weight:700}.register-button[_ngcontent-%COMP%]:disabled{background-color:#d1d5db;cursor:not-allowed}']})};function pi(t,i){if(t&1&&(r(0,"p",18),l(1),n()),t&2){let e=p();m("ngClass",e.isError?"text-red-600":"text-green-600"),s(),I(e.mensaje)}}var je=class t{constructor(i,e,o,a){this.fb=i;this.auth=e;this.session=o;this.router=a;this.loginForm=this.fb.group({email:["",[A.required,A.email]],password:["",A.required]})}loginForm;mensaje="";isError=!1;onSubmit(){if(this.loginForm.invalid)return;let i=this.loginForm.value;this.auth.login(i).subscribe({next:e=>{this.session.setSession(e),this.isError=!1,this.mensaje=e.mensaje;let o=e.userId;setTimeout(()=>this.router.navigate(["/ver-perfil",o]),1e3)},error:e=>{this.isError=!0,e.error?this.mensaje=e.error.error??e.error.mensaje??"Error inesperado.":e.status===0?this.mensaje="No se pudo conectar con el servidor.":this.mensaje=`Error inesperado (c\xF3digo ${e.status}).`,setTimeout(()=>this.mensaje="",5e3)}})}static \u0275fac=function(e){return new(e||t)(b(ye),b(ae),b(N),b(x))};static \u0275cmp=S({type:t,selectors:[["app-login"]],decls:19,vars:3,consts:()=>{let i;i=$localize`Bienvenido!`;let e;e=$localize`Correo electrónico`;let o;o=$localize`Contraseña:`;let a;a=$localize` Ingresar `;let d;return d=$localize` No tienes una cuenta? ${"\uFFFD#18\uFFFD"}:START_LINK:Ingresa aquí${"\uFFFD/#18\uFFFD"}:CLOSE_LINK:`,[i,e,o,a,d,[1,"login-bg","min-h-screen","flex","items-center","justify-center","bg-cover","bg-center"],[1,"login-card","flex","flex-col","items-center","px-8","py-10"],[1,"heading","font-poppins"],[1,"flex","flex-col","items-center","w-full","mt-6",3,"ngSubmit","formGroup"],[1,"form-control"],["for","email",1,"font-bree"],["id","email","type","email","formControlName","email","placeholder","correo@ejemplo.com",1,"w-full","border","border-black","py-2","px-4","font-bree"],["for","password",1,"font-bree"],["id","password","type","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"w-full","border","border-black","py-2","px-4","font-bree"],["type","submit",1,"login-btn","mb-4","disabled:bg-gray-300","disabled:cursor-not-allowed",3,"disabled"],[3,"ngClass",4,"ngIf"],[1,"font-poppins","text-base","mt-4"],["routerLink","/register",1,"link"],[3,"ngClass"]]},template:function(e,o){e&1&&(r(0,"div",5)(1,"div",6)(2,"h1",7),y(3,0),n(),r(4,"form",8),c("ngSubmit",function(){return o.onSubmit()}),r(5,"div",9)(6,"label",10),y(7,1),n(),g(8,"input",11),n(),r(9,"div",9)(10,"label",12),y(11,2),n(),g(12,"input",13),n(),r(13,"button",14),y(14,3),n(),_(15,pi,2,2,"p",15),r(16,"p",16),ue(17,4),g(18,"a",17),fe(),n()()()()),e&2&&(s(4),m("formGroup",o.loginForm),s(9),m("disabled",o.loginForm.invalid),s(2),m("ngIf",o.mensaje))},dependencies:[M,X,E,we,Z,P,F,Y,ve,xe,R,H],styles:['.font-poppins[_ngcontent-%COMP%]{font-family:Poppins,sans-serif}.font-bree[_ngcontent-%COMP%]{font-family:"Bree Serif",serif}.login-bg[_ngcontent-%COMP%]{background-image:url(/FondoLogin.png)}.login-card[_ngcontent-%COMP%]{width:691px;height:591px;background:#fff;border:1px solid #000000}.heading[_ngcontent-%COMP%]{font-size:48px;font-weight:700}.link[_ngcontent-%COMP%]{color:#69aaff;font-weight:600}.form-control[_ngcontent-%COMP%]{width:80%;margin-bottom:1rem}.form-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:497px;height:32px;border-radius:15px}.login-btn[_ngcontent-%COMP%]{width:169px;height:60px;background:#ba07c3;border-radius:20px;color:#fff;font-weight:700}.login-btn[_ngcontent-%COMP%]:disabled{background:#d1d5db;cursor:not-allowed}']})};var v=(t,i)=>{let e=q(x),o=localStorage.getItem("token");return(i.url.startsWith("/register")||i.url.startsWith("/login"))&&o?(e.navigate(["/publicaciones"]),!1):!i.url.startsWith("/register")&&!i.url.startsWith("/login")&&!i.url.startsWith("/home")&&!o?(e.navigate(["/register"]),!1):!0};var $=t=>{let i=t.data?.roles;if(!i||i.length===0)return!0;let e=q(N),o=q(x),a=e.getRole();return a&&i.includes(a)?!0:(o.navigate(["/home"]),!1)};var ut=[{path:"home",component:Ae},{path:"crear-colaboracion",component:Pe,canActivate:[v,$],data:{roles:["MUSICO"]}},{path:"editar-colaboracion/:id",component:Fe,canActivate:[v,$],data:{roles:["MUSICO"]}},{path:"listar-colaboraciones",component:Le,canActivate:[v]},{path:"mostrar-colaboracion/:id",loadComponent:()=>import("./chunk-ZO6BQMXH.js").then(t=>t.MostrarColaboracionComponent),canActivate:[v]},{path:"register",component:Ve,canActivate:[v]},{path:"login",component:je,canActivate:[v]},{path:"crear-convocatoria",loadComponent:()=>import("./chunk-H556IQII.js").then(t=>t.CrearConvocatoriaComponent),canActivate:[v,$],data:{roles:["PRODUCTOR"]}},{path:"editar-convocatoria/:id",loadComponent:()=>import("./chunk-MTXU5N3R.js").then(t=>t.EditarConvocatoriaComponent),canActivate:[v,$],data:{roles:["PRODUCTOR"]}},{path:"listar-convocatorias",loadComponent:()=>import("./chunk-FGASBNTJ.js").then(t=>t.ListarConvocatoriasComponent),canActivate:[v]},{path:"mostrar-convocatoria/:id",loadComponent:()=>import("./chunk-5OBPLBM5.js").then(t=>t.MostrarConvocatoriaComponent),canActivate:[v]},{path:"ver-perfil/:id",loadComponent:()=>import("./chunk-JWQ7R5DI.js").then(t=>t.VerPerfilComponent),canActivate:[v]},{path:"editar-perfil",loadComponent:()=>import("./chunk-V3QDAVCD.js").then(t=>t.EditarPerfilComponent),canActivate:[v]},{path:"listar-perfiles",loadComponent:()=>import("./chunk-OG7NLR63.js").then(t=>t.ListarPerfilesComponent),canActivate:[v]},{path:"listar-seguidos",loadComponent:()=>import("./chunk-YJCPM3JK.js").then(t=>t.ListarSeguidosComponent),canActivate:[v]},{path:"bandas-seguidas",loadComponent:()=>import("./chunk-65GEUTMY.js").then(t=>t.ListarBandasSeguidasComponent),canActivate:[v]},{path:"crear-banda",loadComponent:()=>import("./chunk-74NV3GSD.js").then(t=>t.CrearBandaComponent),canActivate:[v,$],data:{roles:["PRODUCTOR"]}},{path:"invitar-miembro",loadComponent:()=>import("./chunk-LFFTLC4S.js").then(t=>t.InvitarMiembroComponent),canActivate:[v,$],data:{roles:["PRODUCTOR"]}},{path:"editar-banda/:id",loadComponent:()=>import("./chunk-QPBDHSLJ.js").then(t=>t.EditarBandaComponent),canActivate:[v,$],data:{roles:["PRODUCTOR"]}},{path:"bandas",loadComponent:()=>import("./chunk-JK65I2IL.js").then(t=>t.ListarBandasComponent),canActivate:[v]},{path:"mostrar-banda/:id",loadComponent:()=>import("./chunk-WXTONC7U.js").then(t=>t.MostrarBandaComponent),canActivate:[v]},{path:"crear-publicacion",loadComponent:()=>import("./chunk-TPBYBTND.js").then(t=>t.CrearPublicacionComponent),canActivate:[v,$],data:{roles:["MUSICO","PRODUCTOR"]}},{path:"editar-publicacion/:id",loadComponent:()=>import("./chunk-SXSRFJ25.js").then(t=>t.EditarPublicacionComponent),canActivate:[v,$],data:{roles:["MUSICO","PRODUCTOR"]}},{path:"publicaciones",loadComponent:()=>import("./chunk-RFZOUG47.js").then(t=>t.ListarPublicacionesComponent),canActivate:[v]},{path:"",redirectTo:"home",pathMatch:"full"},{path:"**",redirectTo:"home"}];var ft=(t,i)=>{let e=localStorage.getItem("token");if(e){let o=t.clone({headers:t.headers.set("Authorization",`Bearer ${e}`)});return i(o)}return i(t)};var gt=(t,i)=>{let e=q(x),o=q(K);return i(t).pipe(We(a=>{a.status===401&&(localStorage.removeItem("token"),e.navigate(["/register"]));let d="Se produjo un error inesperado";if(typeof a.error=="string")d=a.error;else if(a.error){if(typeof a.error.error=="string")d=a.error.error;else if(typeof a.error.message=="string")d=a.error.message;else if(typeof a.error=="object"){let ee=Object.entries(a.error).map(([de,pe])=>`${de}: ${pe}`);ee.length&&(d=ee.join(" | ")),a.error.message=d}}return["A\xFAn no sigues a ning\xFAn perfil.","No tienes convocatorias favoritas activas.","Ya sigues a este perfil."].includes(d)||o.show(d),Ue(()=>a)}))};var _t={providers:[rt(ut),et(tt([ft,gt]))]};Qe(Re,_t);
